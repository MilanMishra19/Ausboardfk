{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mishr/OneDrive/Desktop/ausboard/app/dashboard/projects/projects-overview/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\ntype Project = {\r\n    projectId:string,\r\n    name:string,\r\n    url:string,\r\n    websiteCategory:string,\r\n    createdAt:string\r\n}\r\nconst BACKEND_URL = process.env.NEXT_PUBLIC_API_URL;\r\nexport default function ProjectDashboard(){\r\n    const [projectData,setProjectData] = useState<Project[]>([]);\r\n    const [loading,setLoading] = useState(true);\r\n    const [menuOpenIndex,setMenuOpenIndex] = useState<number | null>(null);\r\n    const menuRefs = useRef<(HTMLDivElement | null)[]>([]);\r\n    const toggleMenu = (index : number)=>{\r\n        setMenuOpenIndex(menuOpenIndex === index?null:index);\r\n    }\r\n    useEffect(()=>{\r\n        const handleClickOutside = (event:MouseEvent)=>{\r\n            const clickedOutside = menuRefs.current.every(\r\n                (ref)=>!ref || !ref.contains(event.target as Node)\r\n            );\r\n            if(clickedOutside){\r\n                setMenuOpenIndex(null);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\",handleClickOutside);\r\n        return () =>{\r\n            document.removeEventListener(\"mousedown\",handleClickOutside);\r\n        };\r\n    },[]);\r\n    useEffect(()=>{\r\n        const fetchProjects = async()=>{\r\n            try{\r\n                const res = await fetch(`${BACKEND_URL}/api/project/my-projects`,{\r\n                    method:\"GET\",\r\n                    credentials:\"include\",\r\n                    headers:{\r\n                        \"Content-Type\":\"application/json\"\r\n                    }\r\n                });\r\n                if(!res.ok) throw new Error(\"Unable to fetch projects\");\r\n                const data = await res.json();\r\n                setProjectData(data);\r\n            } catch(err) {\r\n                console.error(\"Error fetching projects\",err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchProjects();\r\n    },[]);\r\n    const handleDelete = async(projectId:string)=>{\r\n      const confirmDelete = confirm(\"Are you sure you want to delete this project?\")\r\n      if(!confirmDelete) return;\r\n      try{\r\n        const res = await fetch(`${BACKEND_URL}/api/project/${projectId}`,{\r\n          method:\"DELETE\",\r\n          credentials:\"include\"\r\n        });\r\n        if(!res.ok){\r\n          throw new Error(\"Error deleting project!\");\r\n        }\r\n        setProjectData(prev=>prev.filter(p=>p.projectId!==projectId));\r\n        alert(\"Project deleted successfully!\");\r\n      } catch(err) {\r\n        console.error(err);\r\n        alert(\"Some error occured while deleting your project.\")\r\n      }\r\n    }\r\n    return(\r\n        <div className=\"flex flex-col items-center justify-between gap-5 p-6\">\r\n            <h1 className=\"text-sm font-bold tracking-widest uppercase text-white\">Your projects</h1>\r\n      <div className=\"grid grid-cols-2 max-w-5xl gap-3 justify-between\">\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-screen bg-black text-white\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white mr-4\"></div>\r\n            <span className=\"tracking-widest text-sm\">Fetching your projects...</span>\r\n          </div>\r\n        ) : (\r\n          projectData.map((project, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"col-span-1 border border-white/30 p-6 rounded-xl hover:shadow-xl transition-all\"\r\n            >\r\n              <div className=\"flex flex-col gap-10 items-center justify-center\">\r\n                <div className=\"flex flex-row gap-2 items-center\">\r\n                  <Image\r\n                    src=\"/logo.svg\"\r\n                    alt=\"logo\"\r\n                    height={500}\r\n                    width={500}\r\n                    className=\"h-15 w-15 object-cover rounded-full\"\r\n                  />\r\n                  <div className=\"flex flex-col\">\r\n                    <h1 className=\"text-md text-white tracking-widest font-bold\">{project.name}</h1>\r\n                    <Link href={project.url}>\r\n                    <p className=\"text-sm text-white hover:underline\">{project.url}</p>\r\n                    </Link>\r\n                  </div>\r\n                  <Image\r\n                    src=\"/perf.svg\"\r\n                    alt=\"perf\"\r\n                    height={500}\r\n                    width={500}\r\n                    className=\"h-10 w-10 bg-black rounded-full border-4 border-red-950 animate-pulse\"\r\n                  />\r\n                  <div className=\"relative\" ref={(el) => { menuRefs.current[index] = el; }}>\r\n                  <button className=\"text-xl font-extrabold cursor-pointer text-white\" onClick={() => toggleMenu(index)}>&#8230;</button>\r\n                  {menuOpenIndex === index && (\r\n                    <div className=\"absolute right-0 mt-2 w-32 bg-gray-950 text-black rounded-md shadow-lg z-10\">\r\n                        <ul className=\"flex flex-col text-xs uppercase text-white\">\r\n                            <Link href={`/dashboard/projects/projects-overview/${project.projectId}/testcases`}>\r\n                            <li className=\"px-4 py-2 hover:bg-white/10 cursor-pointer\">Add Testcases</li>\r\n                            </Link>\r\n                            <Link href={`/dashboard/projects/projects-overview/${project.projectId}/testruns`}>\r\n                            <li className=\"px-4 py-2 hover:bg-white/10 cursor-pointer\">Testcases Overview</li>\r\n                            </Link>\r\n                            <button onClick={()=>handleDelete(project.projectId)}>\r\n                            <li className=\"px-4 py-2 hover:bg-white/10 cursor-pointer text-red-500 uppercase\">Delete</li>\r\n                            </button>\r\n                        </ul>\r\n                    </div>\r\n                  )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex flex-row w-full justify-between\">\r\n                <h1 className=\"text-xs font-bold tracking-widest text-white\">Created at: {new Date(project.createdAt).toLocaleDateString(\"en-GB\",{\r\n                    day:\"numeric\",\r\n                    month:\"long\"\r\n                }).replace(/(\\d+)(?!\\d)/,(day)=>{\r\n                    const d = parseInt(day);\r\n                    if(d>3 && d<21) return `${d}th`;\r\n                    switch(d%10){\r\n                        case 1:return `${d}st`;\r\n                        case 2:return `${d}nd`;\r\n                        case 3:return `${d}rd`;\r\n                        default:return `${d}th`;\r\n                    }\r\n                })\r\n                }</h1>\r\n                <h1 className=\"text-xs font-bold uppercase tracking-widest text-white\">{project.websiteCategory}</h1>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n    );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}